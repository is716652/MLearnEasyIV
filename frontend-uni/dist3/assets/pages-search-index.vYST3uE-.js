import{d as a,r as e,c as l,b as s,i as t,l as n,w as i,t as c,F as u,f as d,I as o,j as r,g as v,k as p,_ as m}from"./index-CmkI6VHI.js";import{a as y}from"./api.DXzY1WMI.js";const f=m(a({__name:"index",setup(a){const m=e("回归"),f=e([]),k=e(!1),h=e("");function g(a,e=100){if(!a)return"";const l=a.replace(/\n+/g," ");return l.length>e?l.slice(0,e)+"…":l}async function _(){h.value="",k.value=!0;try{const a=await y.search({query:m.value,limit:20});f.value=a.results||[]}catch(a){h.value=(null==a?void 0:a.message)||"搜索失败"}finally{k.value=!1}}return _(),(a,e)=>{const y=o,b=r;return v(),l("div",{class:"page-wrap"},[s("div",{class:"header"},[t(y,{modelValue:m.value,"onUpdate:modelValue":e[0]||(e[0]=a=>m.value=a),class:"search",placeholder:"搜索算法、数学、代码…",onKeyup:n(_,["enter"])},null,8,["modelValue"]),t(b,{class:"btn",onClick:_},{default:i(()=>[p("搜索")]),_:1})]),s("div",{class:"result"},[k.value?(v(),l("div",{key:0},"正在搜索…")):h.value?(v(),l("div",{key:1},c(h.value),1)):f.value.length?(v(),l("div",{key:3},[(v(!0),l(u,null,d(f.value,a=>(v(),l("div",{key:a.id,class:"item",onClick:e=>{return l=a.id,void(location.href=`#/pages/content/detail?id=${l}`);var l}},[s("div",{class:"t"},c(a.title),1),s("div",{class:"s"},c(g(a.content_body)),1)],8,["onClick"]))),128))])):(v(),l("div",{key:2},"暂无结果"))])])}}}),[["__scopeId","data-v-7665cc3d"]]);export{f as default};
